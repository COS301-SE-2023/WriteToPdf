<div class="container">
  <p-toast></p-toast>
  <div class="header">
    <div class="toolbarWrapper">
      <div class="titleWrapper">
        <div class="logoWrapper" (click)="navigateToPage('home')">
          <img
            class="logo"
            src="assets/Logos/WriteToPdf_Logo_white.png"
            alt=""
          />
        </div>
        <div class="docTitleWrapper">
          <label for="editHeading" class="displayNone">a</label>
          <input
            type="text"
            editable="true"
            id="editHeading"
            class="documentTitle"
            value="New Document"
            maxlength="50"
            (blur)="renameDocument()"
            [(ngModel)]="fileName"
            [title]="fileName"
          />
        </div>
      </div>
      <div class="toolsWrapper">
        <div class="tool" (click)="showDialog()" label="Show">
          <!-- Download -->
          <img src="assets/Icons/editIcons/download.svg" alt="" />
        </div>
        <p-dialog
          header="Export File"
          [(visible)]="exportDialogVisible"
          [focusOnShow]="true"
          [modal]="true"
          [style]="{ width: '50vw' }"
        >
          <div class="flex py-2 justify-content-center"></div>
          <!-- <input type="text" pInputText [(ngModel)]="fileType" /> -->
          <div class="buttonsWrapper">
            <p-button
              label="Export to pdf"
              (click)="convertToFileType('pdf')"
              [style]="{ width: '150px' }"
            ></p-button>
            <p-button
              label="Export to txt"
              (click)="convertToFileType('txt')"
              [style]="{ width: '150px' }"
            ></p-button>
            <p-button
              label="Export to html"
              (click)="convertToFileType('html')"
              [style]="{ width: '150px' }"
            ></p-button>
            <p-button
              label="Export to md"
              (click)="convertToFileType('md')"
              [style]="{ width: '150px' }"
            ></p-button>
            <p-button
              label="Export to jpeg"
              (click)="convertToFileType('jpeg')"
              [style]="{ width: '150px' }"
            ></p-button>
            <p-button
              label="Export to png"
              (click)="convertToFileType('png')"
              [style]="{ width: '150px' }"
            ></p-button>
          </div>
        </p-dialog>

        <div class="tool" (click)="saveDocumentContents()">
          <!-- Save -->
          <img src="assets/Icons/editIcons/save.png" alt="" />
        </div>
        <!-- <div class="tool" (click)="delete()">
          <img src="assets/Icons/editIcons/delete.png" alt="" />
        </div> -->
        <div class="tool" (click)="pageBreak()">
          <!-- Share -->
          <img src="assets/Icons/editIcons/share.svg" alt="" />
        </div>
        <div class="tool" (click)="zoomOut()">
          <!-- Zoom Out -->
          <img src="assets/Icons/editIcons/zoom-out.png" alt="" />
        </div>
        <p class="currentZoom">{{ currentZoom }}</p>
        <div class="tool" (click)="zoomIn()">
          <!-- Zoom In -->
          <img src="assets/Icons/editIcons/zoom-in.png" alt="" />
        </div>
      </div>
      <div class="pageIconWrapper"></div>
      <div class="miscWrapper"></div>
    </div>
    <!-- <div class="speedDialEditMenu">
      <p-speedDial class="speedDial" [model]="speedDialItems" direction="down"></p-speedDial>
    </div> -->
  </div>

  <div class="editor">
    <p-button
      class="showAssetSidebar"
      icon="pi pi-arrow-right"
      (click)="hideSideBar()"
    ></p-button>
    <div class="assetSidebar">
      <div class="sidebarHeaderWrapper">
        <div class="sidebarHeader">
          <div
            class="sidebarHeaderIconWrapper backWrapper"
            (click)="hideSideBar()"
          >
            <img
              class="sidebarHeaderIcon"
              src="assets/Icons/editIcons/back.svg"
              alt=""
            />
          </div>

          <div class="sidebarHeaderTextWrapper">
            <h4 class="sidebarHeaderText">Assets</h4>
          </div>
          <div class="uploadAssetIcon">
            <div class="sidebarHeaderIconWrapper">
              <img
                class="sidebarHeaderIcon"
                src="assets/Icons/editIcons/addAsset.png"
                alt=""
              />
            </div>

            <div class="dropdownContent">
              <div class="dropdownInput">
                <p class="dropdownOptions" (click)="navigateToPage('camera')">
                  Camera
                </p>
              </div>
              <div class="dropdownInput">
                <p class="dropdownOptions" (click)="showFileUploadPopup()">
                  File System
                </p>
              </div>
            </div>
          </div>

          <div class="sidebarHeaderIconWrapper" (click)="refreshSidebar()">
            <img
              class="sidebarHeaderIcon"
              src="assets/Icons/editIcons/refresh.svg"
              alt=""
            />
          </div>
        </div>
        <hr />
      </div>

      <div class="alignDiv"></div>

      <div class="spinnerWrapper" *ngIf = "assets.length === 0"><img class="spinner" src="assets/Spinner/loading2.gif" title="Loading..."></div>
      <div *ngFor="let obj of assets" class="assetWrapper">
        <div class="assetHeader">
          <div class="assetName">
            <!-- <h4 class="assetNameText"></h4> -->
            <label for="editAsset" class="displayNone">b</label>
            <input
              type="text"
              editable="true"
              id="editAssetMock"
              class="assetNameText"
              value="{{ obj.FileName }}"
              maxlength="50"
              (blur)="renameAsset(obj.AssetID, $event)"
              title="{{ obj.FileName }}"
            />
          </div>
          <div class="deleteAsset">
            <img
              class="deleteAssetIcon"
              src="assets/Icons/editIcons/delete.png"
              alt=""
              (click)="deleteAsset(obj.AssetID)"
            />
          </div>
          <div class="copyAsset">
            <img
              *ngIf="obj.Format === 'image'"
              class="copyAssetIcon"
              (click)="retrieveAsset(obj.AssetID, obj.Format)"
              src="assets/Icons/editIcons/copy.svg"
              alt=""
            />
            <img
              *ngIf="obj.Format === 'text'"
              class="copyAssetIcon"
              (click)="retrieveAsset(obj.AssetID, obj.Format)"
              src="assets/Icons/editIcons/view.png"
              alt=""
            />
          </div>
        </div>
        <div class="assetContent">
          <img class="assetImage" src="{{ obj.Image }}" alt="" />
          <p class="assetDescription">{{ obj.Format }}</p>
        </div>
      </div>
    </div>


    <!--    Below is the code that allows me to work with CKEditor    -->
    <div class="center-page">
      <div class="document-editor" style="overflow: hidden">
        <div class="document-editor__toolbar"></div>
        <div
          class="document-editor__editable-container"
          style="overflow: hidden"
        >
          <div
            class="document-editor__editable"
            id="editor-contents"
            style="overflow: hidden"
          ></div>
        </div>
      </div>
      <br />
      <br />
      <br />
    </div>
  </div>
</div>

<p-dialog
  class="extractedTextDialog"
  header="Extracted Text:"
  [(visible)]="textCopyDialog"
  [modal]="true"
  [style]="{ width: '30vw', minWidth: '300px' }"
  [focusOnShow]="true"
>
  <div *ngFor="let text of textFromAsset" class="copyTextWrapper">
    <p class="copyText">{{ text }}</p>
    <div class="copyTextIconWrapper">
      <img
        class="copyTextIcon"
        (click)="copyTextToClipboard(text)"
        src="assets/Icons/editIcons/copy.svg"
        alt=""
      />
    </div>
  </div>
</p-dialog>
